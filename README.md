# Сервис объявлений на FastAPI

REST API сервис для размещения и поиска объявлений о купле/продаже.
Проект выполнен в рамках домашнего задания.

## Функционал

- Создание объявления (POST)
- Просмотр объявления по ID (GET)
- Поиск объявлений по заголовку и цене (GET)
- Обновление объявления (PATCH)
- Удаление объявления (DELETE)

## Задание 2: Аутентификация и Авторизация

- **JWT Аутентификация**: Реализован вход в систему (`/login`) и выдача токенов.
- **Защита эндпоинтов**:
  - Создание объявлений доступно только авторизованным пользователям.
  - Редактирование и удаление доступно только автору объявления или администратору.
- **Автоматизация**: Автоматическая привязка автора к создаваемому объявлению.

### Как проверить
1. **Регистрация**: POST `/register` (JSON: `{"username": "user", "password": "123", "role": "user"}`).
2. **Вход**: POST `/login` (form-data: `username=user`, `password=123`).
3. **Авторизация**: Скопируйте `access_token` из ответа, нажмите **Authorize** в Swagger UI, введите `Bearer <token>` (или просто токен, если Swagger настроен автоматически).
4. **Действия**: Создавайте и управляйте объявлениями.

## Технологии

- Python 3.9
- FastAPI
- Pydantic
- Docker
- JWT (python-jose)
- Passlib (hashing)

## Запуск локально

1. **Клонируйте репозиторий:**
   ```bash
   git clone git@github.com:Edo19999/REST-API-on-FastApi.git
   cd "REST API on FastApi"
   ```

2. **Создайте и активируйте виртуальное окружение:**
   ```bash
   python -m venv venv
   # Windows:
   .\venv\Scripts\activate
   # Linux/MacOS:
   source venv/bin/activate
   ```

3. **Установите зависимости:**
   ```bash
   pip install -r requirements.txt
   ```

4. **Запустите сервер:**
   ```bash
   uvicorn main:app --reload
   ```
   Сервер будет доступен по адресу: http://127.0.0.1:8000
   Документация (Swagger): http://127.0.0.1:8000/docs

## Запуск через Docker

1. **Соберите образ:**
   ```bash
   docker build -t advertisement-app .
   ```

2. **Запустите контейнер:**
   ```bash
   docker run -p 8000:8000 advertisement-app
   ```
